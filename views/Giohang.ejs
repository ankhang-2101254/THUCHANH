<div class="container mt-5">
    <h1 class="text-center">Giỏ Hàng</h1>

    <% if (cart.length > 0) { %>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Sản phẩm</th>
                    <th>Giá</th>
                    <th>Số lượng</th>
                    <th>Tổng cộng</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                <% cart.forEach((item) => { %>
                    <tr>
                        <td><%= item.name %></td>
                        <td><%= item.price.toLocaleString() %> VND</td>
                        <td>
                            <form method="POST" action="/giohang/update">
                                <input type="hidden" name="id" value="<%= item.id %>">
                                <input type="number" name="quantity" value="<%= item.quantity %>" min="1" class="form-control">
                                <button type="submit" class="btn btn-sm btn-primary mt-2">Cập nhật</button>
                            </form>
                        </td>
                        <td><%= (item.price * item.quantity).toLocaleString() %> VND</td>
                        <td>
                            <form method="POST" action="/giohang/remove">
                                <input type="hidden" name="id" value="<%= item.id %>">
                                <button type="submit" class="btn btn-sm btn-danger">Xóa</button>
                            </form>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
        <h3 class="text-end">Tổng cộng: <%= total.toLocaleString() %> VND</h3>
        <form method="POST" action="/giohang/clear">
            <button type="submit" class="btn btn-warning">Xóa toàn bộ giỏ hàng</button>
        </form>
    <% } else { %>
        <h3 class="text-center text-muted">Giỏ hàng của bạn đang trống!</h3>
    <% } %>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>