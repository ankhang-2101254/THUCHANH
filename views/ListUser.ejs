<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="style.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

     </head>
     <body>
        <% for(let i=0;i<data.rows.length;i++) { %>
            <tr>
                <th scope="row">
                    <%= i+1 %>
                </th>
                <td>
                    <%= data.rows[i].username %>
                </td>
                <td>
                    <%= data.rows[i].password %>
                </td>
                <td>
                    <%= data.rows[i].fullname %>
                </td>
                <td>
                    <%= data.rows[i].address %>
                </td>
                <td>
                    <%= data.rows[i].sex %>
                </td>
                <td>
                    <%= data.rows[i].email %>
                </td>
                <td>
                    <span class="setting"><i class="fa fa-eye" aria-hidden="true"></i></span>
                    <span class="setting"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></span>
                    <span class="setting"><i class="fa fa-trash" aria-hidden="true"></i></span>
                </td>
            </tr>
            <% } %>
            <div class="container my-5">
                <h1 class="text-center mb-4">Danh Sách Người Dùng</h1>
            
                <!-- Button thêm người dùng -->
                <div class="d-flex justify-content-end mb-3">
                  <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addUserModal">Thêm Người Dùng</button>
                </div>
            
                <!-- Table danh sách người dùng -->
                <table class="table table-striped table-hover">
                  <thead class="table-dark">
                    <tr>
                      <th>STT</th>
                      <th>username</th>
                      <th>fullname</th>
                      <th>Address</th>
                      <th>setting</th>
                    </tr>
                  </thead>
                  <tbody id="userList">
                    <!-- Dữ liệu người dùng sẽ được thêm ở đây -->
                  </tbody>
                </table>
              </div>
            
              <!-- Modal thêm người dùng -->
              <div class="modal fade" id="addUserModal" tabindex="-1" aria-labelledby="addUserModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="addUserModalLabel">Thêm Người Dùng</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      <form id="addUserForm">
                        <div class="mb-3">
                          <label for="userName" class="form-label">Tên</label>
                          <input type="text" class="form-control" id="userName" required>
                        </div>
                        <div class="mb-3">
                          <label for="userEmail" class="form-label">Email</label>
                          <input type="email" class="form-control" id="userEmail" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Thêm</button>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            
              <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
              <script>
                const userList = document.getElementById('userList');
                const addUserForm = document.getElementById('addUserForm');
            
                let users = [
                  { id: 1, name: 'Nguyễn Văn A', email: 'vana@example.com' },
                  { id: 2, name: 'Trần Thị B', email: 'thib@example.com' },
                ];
            
                // Hàm hiển thị danh sách người dùng
                function renderUsers() {
                  userList.innerHTML = users
                    .map(
                      (user, index) => `
                        <tr>
                          <td>${index + 1}</td>
                          <td>${user.name}</td>
                          <td>${user.email}</td>
                          <td>
                            <button class="btn btn-warning btn-sm me-2" onclick="editUser(${user.id})">Sửa</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteUser(${user.id})">Xóa</button>
                          </td>
                        </tr>
                      `
                    )
                    .join('');
                }
            
                // Hàm thêm người dùng
                addUserForm.addEventListener('submit', (e) => {
                  e.preventDefault();
                  const name = document.getElementById('userName').value;
                  const email = document.getElementById('userEmail').value;
            
                  users.push({ id: users.length + 1, name, email });
                  renderUsers();
                  addUserForm.reset();
                  document.querySelector('#addUserModal .btn-close').click();
                });
            
                // Hàm xóa người dùng
                function deleteUser(id) {
                  users = users.filter(user => user.id !== id);
                  renderUsers();
                }
            
                // Hàm sửa người dùng (giả lập, bạn có thể thêm chi tiết)
                function editUser(id) {
                  alert(`Sửa người dùng có ID: ${id}`);
                }
            
                // Hiển thị danh sách khi trang tải
                renderUsers();
              </script>
     </body>